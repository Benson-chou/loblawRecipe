<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <title>Login</title>
    <!-- the form awesome library is used to add icons to our form -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- include the stylesheet file -->
    <link href="/user.css" rel="stylesheet" type="text/css">
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 8px;
        }
    </style>
    <script>
        function checkNames() {
            // validation image div
            var validationElement = document.getElementById('nameValidation');
            // Get form values
            var newPass1 = document.forms["changePassword"]["newPassword"].value;
            var newPass2 = document.forms["changePassword"]["2newPassword"].value;
            // Reset validation element styles
            validationElement.style.display = 'none';
            validationElement.className = 'validation-image';
            // check if name2 exists
            if (name2) {
                validationElement.style.display = 'inline-block';
                // Choose which class to add to the element
                validationElement.className += 
                    (newPass1 == newPass2 ? ' validation--success' : ' validation-error');
            }
        }
    </script>
</head>

<body>
    <div class="header-container">
        <div class="header">
            <div class="logo">Loblaws Recipe</div>
            <ul class="links">
                <li><%= username %></li>
                <li><a href="/">Log out</a></li>
                <li>
                    <div class="github">
                        <a href="https://github.com/Benson-chou/loblawRecipe" target="_blank">
                            <img class="cat-logo" src="/github-mark-white.png" alt="GitHub Cat Logo">
                            <img class="text-logo" src="/GitHub_Logo_White.png" alt="GitHub Text Logo">
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="content-container">
        <div class = "inputs">
            <form id="locationForm" action="/user/location" method="post">
                <% if (location) {%>
                    <label for="location">Location: </label>
                    <input type="text" name="location" placeholder="<%=location%>" id="location">
                <% } else { %>
                    <label for="location">Location: </label>
                    <input type="text" name="location" placeholder="m5b1r7" id="location">
                <% } %>
                <input type="submit" name="locationChange" value="Update">
            </form>
            <form id="allergiesForm" action="/user/allergies" method="post">
                <% if (allergies) {%>
                    <label for="allergies">Allergies: </label>
                    <input type="text" name="allergies" placeholder="<%=allergies%>" id="allergies">
                <% } else { %>
                    <label for="allergies">Allergies: </label>
                    <input type="text" name="allergies" placeholder="None" id="allergies">
                <% } %>
                <input type="submit" name="allergiesChange" value="Update">
            </form>
            <form name="changePassword" action="/user/changePassword" method="post">
                <label for="oldPassword">Old Password: </label>
                <input type="text" name="oldPassword" required>
                <!-- Need function to check that new and re-enter are the same -->
                 <!-- https://stackoverflow.com/questions/21648374/check-if-two-fields-has-the-same-value-with-javascript -->
                <label for="newPassword">New Password: </label>
                <input type="text" name="newPassword" id="" required>
                <label for="2newPassword">Re-enter New Password: </label>
                <input type="text" name="2newPassword" required>
                <div id="nameValidation" class="validation-image"></div>
                <input type="submit" name="passwordUpdate" value="Update">
            </form> 
            
        </div>
    </div>
</body>